(window.webpackJsonp=window.webpackJsonp||[]).push([[94],{485:function(s,e,a){"use strict";a.r(e);var t=a(12),n=Object(t.a)({},(function(){var s=this,e=s.$createElement,a=s._self._c||e;return a("ContentSlotsDistributor",{attrs:{"slot-key":s.$parent.slotKey}},[a("h1",{attrs:{id:"安装docker"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#安装docker"}},[s._v("#")]),s._v(" 安装Docker")]),s._v(" "),a("blockquote",[a("p",[s._v("引用自"),a("a",{attrs:{href:"http://www.itmuch.com/docker/02-docker-install/",target:"_blank",rel:"noopener noreferrer"}},[s._v("《Docker系列教程02-Docker安装》- 周立"),a("OutboundLink")],1)])]),s._v(" "),a("h2",{attrs:{id:"ubuntu"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#ubuntu"}},[s._v("#")]),s._v(" Ubuntu")]),s._v(" "),a("h3",{attrs:{id:"系统要求"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#系统要求"}},[s._v("#")]),s._v(" 系统要求")]),s._v(" "),a("ul",[a("li",[a("p",[s._v("Docker支持以下版本的Ubuntu，要求64位。")]),s._v(" "),a("ul",[a("li",[s._v("Bionic Beaver 18.04 (LTS)")]),s._v(" "),a("li",[s._v("Zesty 17.04")]),s._v(" "),a("li",[s._v("Xenial 16.04 (LTS)")]),s._v(" "),a("li",[s._v("Trusty 14.04 (LTS)")])])]),s._v(" "),a("li",[a("p",[s._v("支持运行的平台："),a("code",[s._v("x86_64")]),s._v("、"),a("code",[s._v("armhf")]),s._v("、"),a("code",[s._v("s390x(IBM Z)")]),s._v("。其中，如选择IBM Z，那么只支持Ubuntu Xenial以及Zesty。")])]),s._v(" "),a("li",[a("p",[s._v("本文使用Ubuntu 16.04 LTS，下载地址："),a("a",{attrs:{href:"http://cn.ubuntu.com/download/",target:"_blank",rel:"noopener noreferrer"}},[s._v("http://cn.ubuntu.com/download/"),a("OutboundLink")],1)])])]),s._v(" "),a("h3",{attrs:{id:"安装步骤"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#安装步骤"}},[s._v("#")]),s._v(" 安装步骤")]),s._v(" "),a("ol",[a("li",[s._v("卸载老版本Docker")])]),s._v(" "),a("p",[s._v("在Ubuntu中，老版本的软件包名称是 "),a("code",[s._v("docker")]),s._v(" 或者 "),a("code",[s._v("docker-engine")]),s._v(" ，而Docker CE的软件包名称是 "),a("code",[s._v("docker-ce")]),s._v("。因此，如已安装过老版本的Docker，需要先卸载掉。执行以下命令，即可卸载老版本的Docker及其依赖。")]),s._v(" "),a("div",{staticClass:"language-bash line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-bash"}},[a("code",[a("span",{pre:!0,attrs:{class:"token function"}},[s._v("sudo")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token function"}},[s._v("apt-get")]),s._v(" remove docker docker-engine docker.io\n")])]),s._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[s._v("1")]),a("br")])]),a("p",[s._v("需要注意的是，执行该命令只会卸载Docker本身，而不会删除Docker内容，例如镜像、容器、卷以及网络。这些文件保存在 "),a("code",[s._v("/var/lib/docker")]),s._v(" 目录中，需要手动删除。")]),s._v(" "),a("ol",[a("li",[s._v("Ubuntu Trusty 14.04 额外建议安装的包")])]),s._v(" "),a("p",[s._v("除非你有不得已的苦衷，否则强烈建议安装 "),a("code",[s._v("linux-image-extra-*")]),s._v(" 软件包，以便于Docker使用 "),a("code",[s._v("aufs")]),s._v(" 存储驱动。执行如下命令，即可安装 "),a("code",[s._v("linux-image-extra-*")]),s._v("。")]),s._v(" "),a("div",{staticClass:"language-bash line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-bash"}},[a("code",[a("span",{pre:!0,attrs:{class:"token function"}},[s._v("sudo")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token function"}},[s._v("apt-get")]),s._v(" update\n"),a("span",{pre:!0,attrs:{class:"token function"}},[s._v("sudo")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token function"}},[s._v("apt-get")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token function"}},[s._v("install")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("\\")]),s._v("\n    linux-image-extra-"),a("span",{pre:!0,attrs:{class:"token variable"}},[a("span",{pre:!0,attrs:{class:"token variable"}},[s._v("$(")]),a("span",{pre:!0,attrs:{class:"token function"}},[s._v("uname")]),s._v(" -r"),a("span",{pre:!0,attrs:{class:"token variable"}},[s._v(")")])]),s._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("\\")]),s._v("\n    linux-image-extra-virtual\n")])]),s._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[s._v("1")]),a("br"),a("span",{staticClass:"line-number"},[s._v("2")]),a("br"),a("span",{staticClass:"line-number"},[s._v("3")]),a("br"),a("span",{staticClass:"line-number"},[s._v("4")]),a("br")])]),a("p",[s._v("对于Ubuntu 16.04或更高版本，Linux内核包含了对OverlayFS的支持，Docker CE默认会使用 "),a("code",[s._v("overlay2")]),s._v(" 存储驱动。")]),s._v(" "),a("ol",{attrs:{start:"2"}},[a("li",[a("p",[s._v("安装仓库")]),s._v(" "),a("ul",[a("li",[a("p",[s._v("执行如下命令，更新 "),a("code",[s._v("apt")]),s._v(" 的包索引。")]),s._v(" "),a("div",{staticClass:"language-bash line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-bash"}},[a("code",[a("span",{pre:!0,attrs:{class:"token function"}},[s._v("sudo")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token function"}},[s._v("apt-get")]),s._v(" update\n")])]),s._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[s._v("1")]),a("br")])])]),s._v(" "),a("li",[a("p",[s._v("执行如下命令，从而允许 "),a("code",[s._v("apt")]),s._v(" 使用HTTPS仓库。")]),s._v(" "),a("div",{staticClass:"language-bash line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-bash"}},[a("code",[a("span",{pre:!0,attrs:{class:"token function"}},[s._v("sudo")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token function"}},[s._v("apt-get")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token function"}},[s._v("install")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("\\")]),s._v("\napt-transport-https "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("\\")]),s._v("\nca-certificates "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("\\")]),s._v("\n"),a("span",{pre:!0,attrs:{class:"token function"}},[s._v("curl")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("\\")]),s._v("\nsoftware-properties-common\n")])]),s._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[s._v("1")]),a("br"),a("span",{staticClass:"line-number"},[s._v("2")]),a("br"),a("span",{staticClass:"line-number"},[s._v("3")]),a("br"),a("span",{staticClass:"line-number"},[s._v("4")]),a("br"),a("span",{staticClass:"line-number"},[s._v("5")]),a("br")])])]),s._v(" "),a("li",[a("p",[s._v("添加Docker官方的GPG key")]),s._v(" "),a("div",{staticClass:"language-bash line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-bash"}},[a("code",[a("span",{pre:!0,attrs:{class:"token function"}},[s._v("curl")]),s._v(" -fsSL https://download.docker.com/linux/ubuntu/gpg "),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("|")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token function"}},[s._v("sudo")]),s._v(" apt-key "),a("span",{pre:!0,attrs:{class:"token function"}},[s._v("add")]),s._v(" -\n")])]),s._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[s._v("1")]),a("br")])]),a("p",[s._v("确认指纹是9DC8 5822 9FC7 DD38 854A E2D8 8D81 803C 0EBF CD88 。")]),s._v(" "),a("div",{staticClass:"language-bash line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-bash"}},[a("code",[a("span",{pre:!0,attrs:{class:"token function"}},[s._v("sudo")]),s._v(" apt-key fingerprint 0EBFCD88\n")])]),s._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[s._v("1")]),a("br")])])]),s._v(" "),a("li",[a("p",[s._v("执行如下命令，安装 "),a("code",[s._v("stable")]),s._v(" 仓库。无论如何都必须安装 "),a("code",[s._v("stable")]),s._v(" 仓库，即使你想安装 "),a("code",[s._v("edge")]),s._v(" 或 "),a("code",[s._v("test")]),s._v(" 仓库中的Docker构建。如需添加 "),a("code",[s._v("edge")]),s._v(" 或 "),a("code",[s._v("test")]),s._v(" 仓库，可在如下命令中的“stable” 后，添加 "),a("code",[s._v("edge")]),s._v(" 或 "),a("code",[s._v("test")]),s._v(" 或两者。请视自己Ubuntu所运行的平台来执行如下命令。\nNOTE：如下命令中的 "),a("code",[s._v("lsb_release -cs")]),s._v(" 子命令用于返回您Ubuntu的发行版名称，例如 "),a("code",[s._v("xenial")]),s._v(" 。有时，在例如Linux Mint这样的发行版中，您可能需要将如下命令中的 "),a("code",[s._v("$(lsb_release -cs)")]),s._v(" 更改为系统的父级Ubuntu发行版。例如，如果您使用的是Linux Mint Rafaela，则可以使用 "),a("code",[s._v("trusty")]),s._v("。")]),s._v(" "),a("ul",[a("li",[a("p",[s._v("amd64")]),s._v(" "),a("div",{staticClass:"language-bash line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-bash"}},[a("code",[s._v("$ "),a("span",{pre:!0,attrs:{class:"token function"}},[s._v("sudo")]),s._v(" add-apt-repository "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("\\")]),s._v("\n    "),a("span",{pre:!0,attrs:{class:"token string"}},[s._v('"deb [arch=amd64] https://download.docker.com/linux/ubuntu \\\n    '),a("span",{pre:!0,attrs:{class:"token variable"}},[a("span",{pre:!0,attrs:{class:"token variable"}},[s._v("$(")]),s._v("lsb_release -cs"),a("span",{pre:!0,attrs:{class:"token variable"}},[s._v(")")])]),s._v(' \\\n    stable"')]),s._v("\n")])]),s._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[s._v("1")]),a("br"),a("span",{staticClass:"line-number"},[s._v("2")]),a("br"),a("span",{staticClass:"line-number"},[s._v("3")]),a("br"),a("span",{staticClass:"line-number"},[s._v("4")]),a("br")])])]),s._v(" "),a("li",[a("p",[s._v("armhf")]),s._v(" "),a("div",{staticClass:"language-bash line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-bash"}},[a("code",[s._v("$ "),a("span",{pre:!0,attrs:{class:"token function"}},[s._v("sudo")]),s._v(" add-apt-repository "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("\\")]),s._v("\n    "),a("span",{pre:!0,attrs:{class:"token string"}},[s._v('"deb [arch=armhf] https://download.docker.com/linux/ubuntu \\\n    '),a("span",{pre:!0,attrs:{class:"token variable"}},[a("span",{pre:!0,attrs:{class:"token variable"}},[s._v("$(")]),s._v("lsb_release -cs"),a("span",{pre:!0,attrs:{class:"token variable"}},[s._v(")")])]),s._v(' \\\n    stable"')]),s._v("\n")])]),s._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[s._v("1")]),a("br"),a("span",{staticClass:"line-number"},[s._v("2")]),a("br"),a("span",{staticClass:"line-number"},[s._v("3")]),a("br"),a("span",{staticClass:"line-number"},[s._v("4")]),a("br")])])]),s._v(" "),a("li",[a("p",[s._v("s390x")]),s._v(" "),a("div",{staticClass:"language-bash line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-bash"}},[a("code",[s._v("$ "),a("span",{pre:!0,attrs:{class:"token function"}},[s._v("sudo")]),s._v(" add-apt-repository "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("\\")]),s._v("\n    "),a("span",{pre:!0,attrs:{class:"token string"}},[s._v('"deb [arch=s390x] https://download.docker.com/linux/ubuntu \\\n    '),a("span",{pre:!0,attrs:{class:"token variable"}},[a("span",{pre:!0,attrs:{class:"token variable"}},[s._v("$(")]),s._v("lsb_release -cs"),a("span",{pre:!0,attrs:{class:"token variable"}},[s._v(")")])]),s._v(' \\\n    stable"')]),s._v("\n")])]),s._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[s._v("1")]),a("br"),a("span",{staticClass:"line-number"},[s._v("2")]),a("br"),a("span",{staticClass:"line-number"},[s._v("3")]),a("br"),a("span",{staticClass:"line-number"},[s._v("4")]),a("br")])])])]),s._v(" "),a("p",[a("strong",[s._v("NOTE：")]),s._v(" 从Docker 17.06起，stable版本也会发布到edge以及test仓库中。")])])])]),s._v(" "),a("li",[a("p",[s._v("安装Docker CE")]),s._v(" "),a("ul",[a("li",[a("p",[s._v("执行如下命令，更新 "),a("code",[s._v("apt")]),s._v(" 包索引。")]),s._v(" "),a("div",{staticClass:"language-bash line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-bash"}},[a("code",[a("span",{pre:!0,attrs:{class:"token function"}},[s._v("sudo")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token function"}},[s._v("apt-get")]),s._v(" update\n")])]),s._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[s._v("1")]),a("br")])])]),s._v(" "),a("li",[a("p",[s._v("执行如下命令，即可安装最新版本的Docker CE。任何已存在的Docker将会被覆盖安装。")]),s._v(" "),a("div",{staticClass:"language-bash line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-bash"}},[a("code",[a("span",{pre:!0,attrs:{class:"token function"}},[s._v("sudo")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token function"}},[s._v("apt-get")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token function"}},[s._v("install")]),s._v(" docker-ce\n")])]),s._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[s._v("1")]),a("br")])]),a("p",[a("strong",[s._v("WARNING：")]),s._v(" 如启用了多个Docker仓库，使用命令apt-get install 或apt-get update 命令安装或升级时，如未指定版本，那么将会安装最新的版本。这可能不适合您的稳定性要求。")])]),s._v(" "),a("li",[a("p",[s._v("在生产环境中，我们可能需要指定想要安装的版本，此时可使用如下命令列出当前可用的Docker版本。")]),s._v(" "),a("div",{staticClass:"language-bash line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-bash"}},[a("code",[a("span",{pre:!0,attrs:{class:"token function"}},[s._v("apt-cache")]),s._v(" madison docker-ce\n")])]),s._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[s._v("1")]),a("br")])]),a("p",[s._v("这样，列出版本后，可使用如下命令，安装想要安装的Docker CE版本。")]),s._v(" "),a("div",{staticClass:"language-bash line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-bash"}},[a("code",[a("span",{pre:!0,attrs:{class:"token function"}},[s._v("sudo")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token function"}},[s._v("apt-get")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token function"}},[s._v("install")]),s._v(" docker-ce"),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("<")]),s._v("VERSION"),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v(">")]),s._v("\n")])]),s._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[s._v("1")]),a("br")])]),a("p",[s._v("Docker daemon会自动启动。")])]),s._v(" "),a("li",[a("p",[s._v("验证安装是否正确。")]),s._v(" "),a("div",{staticClass:"language-bash line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-bash"}},[a("code",[a("span",{pre:!0,attrs:{class:"token function"}},[s._v("sudo")]),s._v(" docker run hello-world\n")])]),s._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[s._v("1")]),a("br")])])])])]),s._v(" "),a("li",[a("p",[s._v("升级Docker CE")])])]),s._v(" "),a("p",[s._v("如需升级Docker CE，只需执行如下命令：")]),s._v(" "),a("div",{staticClass:"language-bash line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-bash"}},[a("code",[a("span",{pre:!0,attrs:{class:"token function"}},[s._v("sudo")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token function"}},[s._v("apt-get")]),s._v(" update\n")])]),s._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[s._v("1")]),a("br")])]),a("p",[s._v("然后按照安装Docker的步骤，即可升级Docker。")]),s._v(" "),a("ol",{attrs:{start:"5"}},[a("li",[s._v("参考文档")])]),s._v(" "),a("p",[s._v("Ubuntu安装Docker官方文档："),a("a",{attrs:{href:"https://docs.docker.com/engine/installation/linux/docker-ce/ubuntu/",target:"_blank",rel:"noopener noreferrer"}},[s._v("https://docs.docker.com/engine/installation/linux/docker-ce/ubuntu/"),a("OutboundLink")],1),s._v(" ，文档还讲解了在Ubuntu中安装Docker CE的其他方式，本文不作赘述。")]),s._v(" "),a("h2",{attrs:{id:"centos7"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#centos7"}},[s._v("#")]),s._v(" CentOS7")]),s._v(" "),a("h3",{attrs:{id:"系统要求-2"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#系统要求-2"}},[s._v("#")]),s._v(" 系统要求")]),s._v(" "),a("ul",[a("li",[a("p",[s._v("CentOS 7或更高版本")])]),s._v(" "),a("li",[a("p",[s._v("centos-extras 仓库必须处于启用状态，该仓库默认启用，但如果您禁用了该仓库，请按照"),a("a",{attrs:{href:"https://wiki.centos.org/AdditionalResources/Repositories",target:"_blank",rel:"noopener noreferrer"}},[s._v("https://wiki.centos.org/AdditionalResources/Repositories"),a("OutboundLink")],1),s._v("中的描述重新启用。")])]),s._v(" "),a("li",[a("p",[s._v("建议使用overlay2 存储驱动")])])]),s._v(" "),a("h3",{attrs:{id:"yum安装"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#yum安装"}},[s._v("#")]),s._v(" yum安装")]),s._v(" "),a("ol",[a("li",[s._v("卸载老版本的Docker")])]),s._v(" "),a("p",[s._v("在CentOS中，老版本Docker名称是 "),a("code",[s._v("docker")]),s._v(" 或 "),a("code",[s._v("docker-engine")]),s._v("，而Docker CE的软件包名称是 "),a("code",[s._v("docker-ce")]),s._v("。因此，如已安装过老版本的Docker，需使用如下命令卸载。")]),s._v(" "),a("div",{staticClass:"language-bash line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-bash"}},[a("code",[a("span",{pre:!0,attrs:{class:"token function"}},[s._v("sudo")]),s._v(" yum remove docker "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("\\")]),s._v("\ndocker-common "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("\\")]),s._v("\ndocker-selinux "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("\\")]),s._v("\ndocker-engine\n")])]),s._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[s._v("1")]),a("br"),a("span",{staticClass:"line-number"},[s._v("2")]),a("br"),a("span",{staticClass:"line-number"},[s._v("3")]),a("br"),a("span",{staticClass:"line-number"},[s._v("4")]),a("br")])]),a("p",[s._v("需要注意的是，执行该命令只会卸载Docker本身，而不会删除Docker存储的文件，例如镜像、容器、卷以及网络文件等。这些文件保存在 "),a("code",[s._v("/var/lib/docker")]),s._v(" 目录中，需要手动删除。")]),s._v(" "),a("ol",{attrs:{start:"2"}},[a("li",[a("p",[s._v("安装仓库")]),s._v(" "),a("ul",[a("li",[a("p",[s._v("执行以下命令，安装Docker所需的包。其中，"),a("code",[s._v("yum-utils")]),s._v("提供了 "),a("code",[s._v("yum-config-manager")]),s._v(" 工具；"),a("code",[s._v("device-mapper-persistent-data")]),s._v(" 及 "),a("code",[s._v("lvm2")]),s._v(" 则是 "),a("code",[s._v("devicemapper")]),s._v(" 存储驱动所需的包。")]),s._v(" "),a("div",{staticClass:"language-bash line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-bash"}},[a("code",[a("span",{pre:!0,attrs:{class:"token function"}},[s._v("sudo")]),s._v(" yum "),a("span",{pre:!0,attrs:{class:"token function"}},[s._v("install")]),s._v(" -y yum-utils device-mapper-persistent-data lvm2\n")])]),s._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[s._v("1")]),a("br")])])]),s._v(" "),a("li",[a("p",[s._v("执行如下命令，安装 "),a("code",[s._v("stable")]),s._v(" 仓库。必须安装 "),a("code",[s._v("stable")]),s._v(" 仓库，即使你想安装 "),a("code",[s._v("edge")]),s._v(" 或 "),a("code",[s._v("test")]),s._v(" 仓库中的Docker构建版本。")]),s._v(" "),a("div",{staticClass:"language-bash line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-bash"}},[a("code",[a("span",{pre:!0,attrs:{class:"token function"}},[s._v("sudo")]),s._v(" yum-config-manager "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("\\")]),s._v("\n--add-repo "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("\\")]),s._v("\nhttps://download.docker.com/linux/centos/docker-ce.repo\n")])]),s._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[s._v("1")]),a("br"),a("span",{staticClass:"line-number"},[s._v("2")]),a("br"),a("span",{staticClass:"line-number"},[s._v("3")]),a("br")])])]),s._v(" "),a("li",[a("p",[s._v("[可选] 执行如下命令，启用 "),a("code",[s._v("edge")]),s._v(" 及 "),a("code",[s._v("test")]),s._v(" 仓库。edge/test仓库其实也包含在了 "),a("code",[s._v("docker.repo")]),s._v(" 文件中，但默认是禁用的，可使用以下命令来启用。")]),s._v(" "),a("div",{staticClass:"language-bash line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-bash"}},[a("code",[a("span",{pre:!0,attrs:{class:"token function"}},[s._v("sudo")]),s._v(" yum-config-manager --enable docker-ce-edge    "),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 启用edge仓库")]),s._v("\n"),a("span",{pre:!0,attrs:{class:"token function"}},[s._v("sudo")]),s._v(" yum-config-manager --enable docker-ce-test    "),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 启用test仓库")]),s._v("\n")])]),s._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[s._v("1")]),a("br"),a("span",{staticClass:"line-number"},[s._v("2")]),a("br")])]),a("p",[s._v("如需再次禁用，可加上 "),a("code",[s._v("--disable")]),s._v(" 标签。例如，执行如下命令即可禁用edge仓库。")]),s._v(" "),a("div",{staticClass:"language-bash line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-bash"}},[a("code",[a("span",{pre:!0,attrs:{class:"token function"}},[s._v("sudo")]),s._v(" yum-config-manager --disable docker-ce-edge\n")])]),s._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[s._v("1")]),a("br")])]),a("p",[a("strong",[s._v("TIPS：")]),s._v(" 从Docker 17.06起，stable版本也会发布到edge以及test仓库中。")])])])]),s._v(" "),a("li",[a("p",[s._v("安装Docker CE")]),s._v(" "),a("ul",[a("li",[a("p",[s._v("执行以下命令，更新yum的包索引")]),s._v(" "),a("div",{staticClass:"language-bash line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-bash"}},[a("code",[a("span",{pre:!0,attrs:{class:"token function"}},[s._v("sudo")]),s._v(" yum makecache fast\n")])]),s._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[s._v("1")]),a("br")])])]),s._v(" "),a("li",[a("p",[s._v("执行如下命令即可安装最新版本的Docker CE")]),s._v(" "),a("div",{staticClass:"language-bash line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-bash"}},[a("code",[a("span",{pre:!0,attrs:{class:"token function"}},[s._v("sudo")]),s._v(" yum "),a("span",{pre:!0,attrs:{class:"token function"}},[s._v("install")]),s._v(" docker-ce\n")])]),s._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[s._v("1")]),a("br")])])]),s._v(" "),a("li",[a("p",[s._v("在生产环境中，可能需要指定想要安装的版本，此时可使用如下命令列出当前可用的Docker版本。")]),s._v(" "),a("div",{staticClass:"language-bash line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-bash"}},[a("code",[s._v("yum list docker-ce.x86_64  --showduplicates "),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("|")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token function"}},[s._v("sort")]),s._v(" -r\n")])]),s._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[s._v("1")]),a("br")])]),a("p",[s._v("这样，列出版本后，可使用如下命令，安装想要安装的Docker CE版本。")]),s._v(" "),a("div",{staticClass:"language-bash line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-bash"}},[a("code",[a("span",{pre:!0,attrs:{class:"token function"}},[s._v("sudo")]),s._v(" yum "),a("span",{pre:!0,attrs:{class:"token function"}},[s._v("install")]),s._v(" docker-ce-"),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("<")]),s._v("VERSION"),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v(">")]),s._v("\n")])]),s._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[s._v("1")]),a("br")])])]),s._v(" "),a("li",[a("p",[s._v("启动Docker")]),s._v(" "),a("div",{staticClass:"language-bash line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-bash"}},[a("code",[a("span",{pre:!0,attrs:{class:"token function"}},[s._v("sudo")]),s._v(" systemctl start docker\n")])]),s._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[s._v("1")]),a("br")])])]),s._v(" "),a("li",[a("p",[s._v("验证安装是否正确。")]),s._v(" "),a("div",{staticClass:"language-bash line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-bash"}},[a("code",[a("span",{pre:!0,attrs:{class:"token function"}},[s._v("sudo")]),s._v(" docker run hello-world\n")])]),s._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[s._v("1")]),a("br")])]),a("p",[s._v("这样，Docker将会下载测试镜像，并使用该镜像启动一个容器。如能够看到类似如下的输出，则说明安装成功。")]),s._v(" "),a("div",{staticClass:"language-bash line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-bash"}},[a("code",[s._v("Unable to "),a("span",{pre:!0,attrs:{class:"token function"}},[s._v("find")]),s._v(" image "),a("span",{pre:!0,attrs:{class:"token string"}},[s._v("'hello-world:latest'")]),s._v(" locally\nlatest: Pulling from library/hello-world\nb04784fba78d: Pull complete\nDigest: sha256:f3b3b28a45160805bb16542c9531888519430e9e6d6ffc09d72261b0d26ff74f\nStatus: Downloaded newer image "),a("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("for")]),s._v(" hello-world:latest\nHello from Docker"),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("!")]),s._v("\nThis message shows that your installation appears to be working correctly.\nTo generate this message, Docker took the following steps:\n"),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("1")]),s._v(". The Docker client contacted the Docker daemon.\n"),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("2")]),s._v(". The Docker daemon pulled the "),a("span",{pre:!0,attrs:{class:"token string"}},[s._v('"hello-world"')]),s._v(" image from the Docker Hub.\n"),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("3")]),s._v(". The Docker daemon created a new container from that image "),a("span",{pre:!0,attrs:{class:"token function"}},[s._v("which")]),s._v(" runs the\n    executable that produces the output you are currently reading.\n"),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("4")]),s._v(". The Docker daemon streamed that output to the Docker client, "),a("span",{pre:!0,attrs:{class:"token function"}},[s._v("which")]),s._v(" sent it\n    to your terminal.\nTo try something "),a("span",{pre:!0,attrs:{class:"token function"}},[s._v("more")]),s._v(" ambitious, you can run an Ubuntu container with:\n$ docker run -it ubuntu "),a("span",{pre:!0,attrs:{class:"token function"}},[s._v("bash")]),s._v("\nShare images, automate workflows, and "),a("span",{pre:!0,attrs:{class:"token function"}},[s._v("more")]),s._v(" with a "),a("span",{pre:!0,attrs:{class:"token function"}},[s._v("free")]),s._v(" Docker ID:\nhttps://cloud.docker.com/\nFor "),a("span",{pre:!0,attrs:{class:"token function"}},[s._v("more")]),s._v(" examples and ideas, visit:\nhttps://docs.docker.com/engine/userguide/\n")])]),s._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[s._v("1")]),a("br"),a("span",{staticClass:"line-number"},[s._v("2")]),a("br"),a("span",{staticClass:"line-number"},[s._v("3")]),a("br"),a("span",{staticClass:"line-number"},[s._v("4")]),a("br"),a("span",{staticClass:"line-number"},[s._v("5")]),a("br"),a("span",{staticClass:"line-number"},[s._v("6")]),a("br"),a("span",{staticClass:"line-number"},[s._v("7")]),a("br"),a("span",{staticClass:"line-number"},[s._v("8")]),a("br"),a("span",{staticClass:"line-number"},[s._v("9")]),a("br"),a("span",{staticClass:"line-number"},[s._v("10")]),a("br"),a("span",{staticClass:"line-number"},[s._v("11")]),a("br"),a("span",{staticClass:"line-number"},[s._v("12")]),a("br"),a("span",{staticClass:"line-number"},[s._v("13")]),a("br"),a("span",{staticClass:"line-number"},[s._v("14")]),a("br"),a("span",{staticClass:"line-number"},[s._v("15")]),a("br"),a("span",{staticClass:"line-number"},[s._v("16")]),a("br"),a("span",{staticClass:"line-number"},[s._v("17")]),a("br"),a("span",{staticClass:"line-number"},[s._v("18")]),a("br"),a("span",{staticClass:"line-number"},[s._v("19")]),a("br"),a("span",{staticClass:"line-number"},[s._v("20")]),a("br")])])])])]),s._v(" "),a("li",[a("p",[s._v("升级Docker CE")])])]),s._v(" "),a("p",[s._v("如需升级Docker CE，只需执行如下命令：")]),s._v(" "),a("div",{staticClass:"language-bash line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-bash"}},[a("code",[a("span",{pre:!0,attrs:{class:"token function"}},[s._v("sudo")]),s._v(" yum makecache fast\n")])]),s._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[s._v("1")]),a("br")])]),a("p",[s._v("然后按照安装Docker的步骤，即可升级Docker。")]),s._v(" "),a("ol",{attrs:{start:"5"}},[a("li",[s._v("参考文档")])]),s._v(" "),a("p",[s._v("CentOS 7安装Docker官方文档："),a("a",{attrs:{href:"https://docs.docker.com/engine/installation/linux/docker-ce/centos/",target:"_blank",rel:"noopener noreferrer"}},[s._v("https://docs.docker.com/engine/installation/linux/docker-ce/centos/"),a("OutboundLink")],1),s._v("，文档中还讲解了在CentOS 7中安装Docker CE的其他方式，本文不作赘述。")]),s._v(" "),a("h3",{attrs:{id:"shell一键安装"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#shell一键安装"}},[s._v("#")]),s._v(" shell一键安装")]),s._v(" "),a("div",{staticClass:"language-bash line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-bash"}},[a("code",[a("span",{pre:!0,attrs:{class:"token function"}},[s._v("curl")]),s._v(" -fsSL get.docker.com -o get-docker.sh\n"),a("span",{pre:!0,attrs:{class:"token function"}},[s._v("sudo")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token function"}},[s._v("sh")]),s._v(" get-docker.sh\n")])]),s._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[s._v("1")]),a("br"),a("span",{staticClass:"line-number"},[s._v("2")]),a("br")])]),a("p",[s._v("搞定一切。")]),s._v(" "),a("h2",{attrs:{id:"macos"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#macos"}},[s._v("#")]),s._v(" MacOS")]),s._v(" "),a("h3",{attrs:{id:"系统要求-3"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#系统要求-3"}},[s._v("#")]),s._v(" 系统要求")]),s._v(" "),a("p",[s._v("macOS Yosemite 10.10.3或更高版本")]),s._v(" "),a("h3",{attrs:{id:"安装步骤-2"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#安装步骤-2"}},[s._v("#")]),s._v(" 安装步骤")]),s._v(" "),a("ol",[a("li",[a("p",[s._v("前往"),a("a",{attrs:{href:"https://store.docker.com/editions/community/docker-ce-desktop-mac",target:"_blank",rel:"noopener noreferrer"}},[s._v("https://store.docker.com/editions/community/docker-ce-desktop-mac"),a("OutboundLink")],1),s._v("，点击页面右侧的“Get Docker”按钮，下载安装包；")])]),s._v(" "),a("li",[a("p",[s._v("双击即可安装。")])])]),s._v(" "),a("h2",{attrs:{id:"windows"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#windows"}},[s._v("#")]),s._v(" Windows")]),s._v(" "),a("h3",{attrs:{id:"系统要求-4"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#系统要求-4"}},[s._v("#")]),s._v(" 系统要求")]),s._v(" "),a("p",[s._v("Windows 10 Professional 或 Windows 10 Enterprise X64")]),s._v(" "),a("p",[s._v("对于Win 7，可使用Docker Toolbox（不建议使用）")]),s._v(" "),a("h3",{attrs:{id:"安装步骤-3"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#安装步骤-3"}},[s._v("#")]),s._v(" 安装步骤")]),s._v(" "),a("ol",[a("li",[a("p",[s._v("前往"),a("a",{attrs:{href:"https://store.docker.com/editions/community/docker-ce-desktop-windows",target:"_blank",rel:"noopener noreferrer"}},[s._v("https://store.docker.com/editions/community/docker-ce-desktop-windows"),a("OutboundLink")],1),s._v("，点击页面右侧的“Get Docker”按钮，下载安装包；")])]),s._v(" "),a("li",[a("p",[s._v("双击即可安装。")])])])])}),[],!1,null,null,null);e.default=n.exports}}]);