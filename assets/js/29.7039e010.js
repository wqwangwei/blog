(window.webpackJsonp=window.webpackJsonp||[]).push([[29],{484:function(s,a,e){"use strict";e.r(a);var n=e(12),t=Object(n.a)({},(function(){var s=this,a=s.$createElement,e=s._self._c||a;return e("ContentSlotsDistributor",{attrs:{"slot-key":s.$parent.slotKey}},[e("blockquote",[e("p",[s._v("引用自 "),e("a",{attrs:{href:"https://segmentfault.com/a/1190000014683418",target:"_blank",rel:"noopener noreferrer"}},[s._v("我花了一个五一终于搞懂了OpenLDAP"),e("OutboundLink")],1)])]),s._v(" "),e("blockquote",[e("p",[s._v("轻型目录访问协议（英文：Lightweight Directory Access Protocol，缩写：LDAP）是一个开放的，中立的，工业标准的应用协议，通过IP协议提供访问控制和维护分布式信息的目录信息。")])]),s._v(" "),e("p",[s._v("大部分企业级工具都支持LDAP协议，我们可以搭建OpenLDAP服务使得这些企业级工具共享同一套用户名和密码来进行认证授权。")]),s._v(" "),e("h2",{attrs:{id:"安装openldap"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#安装openldap"}},[s._v("#")]),s._v(" 安装OpenLDAP")]),s._v(" "),e("div",{staticClass:"language-bash line-numbers-mode"},[e("pre",{pre:!0,attrs:{class:"language-bash"}},[e("code",[s._v("yum "),e("span",{pre:!0,attrs:{class:"token function"}},[s._v("install")]),s._v(" openldap openldap-clients openldap-servers\n")])]),s._v(" "),e("div",{staticClass:"line-numbers-wrapper"},[e("span",{staticClass:"line-number"},[s._v("1")]),e("br")])]),e("p",[s._v("启动OpenLDAP服务")]),s._v(" "),e("div",{staticClass:"language-bash line-numbers-mode"},[e("pre",{pre:!0,attrs:{class:"language-bash"}},[e("code",[e("span",{pre:!0,attrs:{class:"token function"}},[s._v("service")]),s._v(" slapd start\n")])]),s._v(" "),e("div",{staticClass:"line-numbers-wrapper"},[e("span",{staticClass:"line-number"},[s._v("1")]),e("br")])]),e("h2",{attrs:{id:"配置openldap"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#配置openldap"}},[s._v("#")]),s._v(" 配置OpenLDAP")]),s._v(" "),e("h3",{attrs:{id:"root-ldif"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#root-ldif"}},[s._v("#")]),s._v(" root.ldif")]),s._v(" "),e("div",{staticClass:"language- line-numbers-mode"},[e("pre",{pre:!0,attrs:{class:"language-text"}},[e("code",[s._v("dn: olcDatabase={2}bdb,cn=config\nchangetype: modify\nreplace: olcRootDN\nolcRootDN: cn=admin,dc=example,dc=com\n-\nreplace: olcSuffix\nolcSuffix: dc=example,dc=com\n-\nreplace: olcRootPW\nolcRootPW: {SSHA}RLFdZ/Ym/O9TODUMNAPh8a7F5DzDaG5P\n")])]),s._v(" "),e("div",{staticClass:"line-numbers-wrapper"},[e("span",{staticClass:"line-number"},[s._v("1")]),e("br"),e("span",{staticClass:"line-number"},[s._v("2")]),e("br"),e("span",{staticClass:"line-number"},[s._v("3")]),e("br"),e("span",{staticClass:"line-number"},[s._v("4")]),e("br"),e("span",{staticClass:"line-number"},[s._v("5")]),e("br"),e("span",{staticClass:"line-number"},[s._v("6")]),e("br"),e("span",{staticClass:"line-number"},[s._v("7")]),e("br"),e("span",{staticClass:"line-number"},[s._v("8")]),e("br"),e("span",{staticClass:"line-number"},[s._v("9")]),e("br"),e("span",{staticClass:"line-number"},[s._v("10")]),e("br")])]),e("p",[s._v("修改RootDN，使用指令"),e("code",[s._v("ldapmodify -Q -Y EXTERNAL -H ldapi:/// -f root.ldif")])]),s._v(" "),e("h3",{attrs:{id:"org-ldif"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#org-ldif"}},[s._v("#")]),s._v(" org.ldif")]),s._v(" "),e("div",{staticClass:"language- line-numbers-mode"},[e("pre",{pre:!0,attrs:{class:"language-text"}},[e("code",[s._v("dn: dc=example,dc=com\ndc: example\nobjectClass: dcObject\nobjectClass: organizationalUnit\nou: rootobject\n\ndn: ou=Group,dc=example,dc=com\nou: Group\ndescription: Groups\nobjectClass: organizationalUnit\n\ndn: ou=People,dc=example,dc=com\nou: People\ndescription: People\nobjectClass: organizationalUnit\n")])]),s._v(" "),e("div",{staticClass:"line-numbers-wrapper"},[e("span",{staticClass:"line-number"},[s._v("1")]),e("br"),e("span",{staticClass:"line-number"},[s._v("2")]),e("br"),e("span",{staticClass:"line-number"},[s._v("3")]),e("br"),e("span",{staticClass:"line-number"},[s._v("4")]),e("br"),e("span",{staticClass:"line-number"},[s._v("5")]),e("br"),e("span",{staticClass:"line-number"},[s._v("6")]),e("br"),e("span",{staticClass:"line-number"},[s._v("7")]),e("br"),e("span",{staticClass:"line-number"},[s._v("8")]),e("br"),e("span",{staticClass:"line-number"},[s._v("9")]),e("br"),e("span",{staticClass:"line-number"},[s._v("10")]),e("br"),e("span",{staticClass:"line-number"},[s._v("11")]),e("br"),e("span",{staticClass:"line-number"},[s._v("12")]),e("br"),e("span",{staticClass:"line-number"},[s._v("13")]),e("br"),e("span",{staticClass:"line-number"},[s._v("14")]),e("br"),e("span",{staticClass:"line-number"},[s._v("15")]),e("br")])]),e("p",[s._v("使用指令"),e("code",[s._v('ldapadd -H ldapi:/// -D "cn=admin,dc=example,dc=com" -x -w ${password} -f org.ldif')]),s._v("。注意将"),e("code",[s._v("${password}")]),s._v("替换为实际的密码。")]),s._v(" "),e("p",[s._v("以下三个文件以同样方式执行命令。")]),s._v(" "),e("h3",{attrs:{id:"memberof-config-ldif"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#memberof-config-ldif"}},[s._v("#")]),s._v(" memberof_config.ldif")]),s._v(" "),e("div",{staticClass:"language- line-numbers-mode"},[e("pre",{pre:!0,attrs:{class:"language-text"}},[e("code",[s._v("dn: cn=module,cn=config\ncn: module\nobjectClass: olcModuleList\nolcModuleLoad: memberof\nolcModulePath: /usr/lib64/openldap\n\ndn: olcOverlay={0}memberof,olcDatabase={2}bdb,cn=config\nobjectClass: olcConfig\nobjectClass: olcMemberOf\nobjectClass: olcOverlayConfig\nobjectClass: top\nolcOverlay: memberof\nolcMemberOfDangling: ignore\nolcMemberOfRefInt: TRUE\nolcMemberOfGroupOC: groupOfNames\nolcMemberOfMemberAD: member\nolcMemberOfMemberOfAD: memberOf\n")])]),s._v(" "),e("div",{staticClass:"line-numbers-wrapper"},[e("span",{staticClass:"line-number"},[s._v("1")]),e("br"),e("span",{staticClass:"line-number"},[s._v("2")]),e("br"),e("span",{staticClass:"line-number"},[s._v("3")]),e("br"),e("span",{staticClass:"line-number"},[s._v("4")]),e("br"),e("span",{staticClass:"line-number"},[s._v("5")]),e("br"),e("span",{staticClass:"line-number"},[s._v("6")]),e("br"),e("span",{staticClass:"line-number"},[s._v("7")]),e("br"),e("span",{staticClass:"line-number"},[s._v("8")]),e("br"),e("span",{staticClass:"line-number"},[s._v("9")]),e("br"),e("span",{staticClass:"line-number"},[s._v("10")]),e("br"),e("span",{staticClass:"line-number"},[s._v("11")]),e("br"),e("span",{staticClass:"line-number"},[s._v("12")]),e("br"),e("span",{staticClass:"line-number"},[s._v("13")]),e("br"),e("span",{staticClass:"line-number"},[s._v("14")]),e("br"),e("span",{staticClass:"line-number"},[s._v("15")]),e("br"),e("span",{staticClass:"line-number"},[s._v("16")]),e("br"),e("span",{staticClass:"line-number"},[s._v("17")]),e("br")])]),e("h3",{attrs:{id:"refint1-ldif"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#refint1-ldif"}},[s._v("#")]),s._v(" refint1.ldif")]),s._v(" "),e("div",{staticClass:"language- line-numbers-mode"},[e("pre",{pre:!0,attrs:{class:"language-text"}},[e("code",[s._v("dn: cn=module{0},cn=config\nadd: olcmoduleload\nolcmoduleload: refint\n")])]),s._v(" "),e("div",{staticClass:"line-numbers-wrapper"},[e("span",{staticClass:"line-number"},[s._v("1")]),e("br"),e("span",{staticClass:"line-number"},[s._v("2")]),e("br"),e("span",{staticClass:"line-number"},[s._v("3")]),e("br")])]),e("h3",{attrs:{id:"refint2-ldif"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#refint2-ldif"}},[s._v("#")]),s._v(" refint2.ldif")]),s._v(" "),e("div",{staticClass:"language- line-numbers-mode"},[e("pre",{pre:!0,attrs:{class:"language-text"}},[e("code",[s._v("dn: olcOverlay={1}refint,olcDatabase={2}bdb,cn=config\nobjectClass: olcConfig\nobjectClass: olcOverlayConfig\nobjectClass: olcRefintConfig\nobjectClass: top\nolcOverlay: {1}refint\nolcRefintAttribute: memberof member manager owner\n")])]),s._v(" "),e("div",{staticClass:"line-numbers-wrapper"},[e("span",{staticClass:"line-number"},[s._v("1")]),e("br"),e("span",{staticClass:"line-number"},[s._v("2")]),e("br"),e("span",{staticClass:"line-number"},[s._v("3")]),e("br"),e("span",{staticClass:"line-number"},[s._v("4")]),e("br"),e("span",{staticClass:"line-number"},[s._v("5")]),e("br"),e("span",{staticClass:"line-number"},[s._v("6")]),e("br"),e("span",{staticClass:"line-number"},[s._v("7")]),e("br")])])])}),[],!1,null,null,null);a.default=t.exports}}]);