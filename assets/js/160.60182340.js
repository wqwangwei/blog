(window.webpackJsonp=window.webpackJsonp||[]).push([[160],{402:function(r,e,t){"use strict";t.r(e);var a=t(12),v=Object(a.a)({},(function(){var r=this,e=r.$createElement,t=r._self._c||e;return t("ContentSlotsDistributor",{attrs:{"slot-key":r.$parent.slotKey}},[t("h1",{attrs:{id:"内存结构"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#内存结构"}},[r._v("#")]),r._v(" 内存结构")]),r._v(" "),t("ul",[t("li",[t("p",[t("a",{attrs:{href:"https://mp.weixin.qq.com/s/li3ISdodGu2EK_Fo_4NJPA",target:"_blank",rel:"noopener noreferrer"}},[r._v("JVM内存结构"),t("OutboundLink")],1)])]),r._v(" "),t("li",[t("p",[t("a",{attrs:{href:"https://www.cnblogs.com/paddix/p/5309550.html",target:"_blank",rel:"noopener noreferrer"}},[r._v("java8 去除永久代增加元数据区Metaspace"),t("OutboundLink")],1)])])]),r._v(" "),t("h2",{attrs:{id:"虚拟机运行时的数据区"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#虚拟机运行时的数据区"}},[r._v("#")]),r._v(" 虚拟机运行时的数据区")]),r._v(" "),t("p",[t("img",{attrs:{src:"/images/JVM%E5%86%85%E5%AD%98%E7%BB%93%E6%9E%84/jvm-memory.jpg",alt:"jvm-memory"}})]),r._v(" "),t("ul",[t("li",[t("p",[r._v("程序计数器（program counter register），一块较小的内存空间，可以看作当前线程所执行的字节码的行号指示器。由于Java虚拟机是采用多线程，通过线程切换获得时间片得到cpu的控制权。为了线程切换后能恢复到正确的执行位置。")])]),r._v(" "),t("li",[t("p",[r._v("虚拟机栈，调用一个方法时会创建一个栈帧，用于存储局部变量、对象引用、方法返回值，每一个方法从调用到执行完成，就对应着一个栈帧在虚拟机栈中入栈到出栈的过程。通过 -Xss 控制大小，如果线程请求的栈深度大于虚拟机所允许的深度，会抛出StackOverflowError。通过递归死锁会引发这种问题。")])]),r._v(" "),t("li",[t("p",[r._v("本地方法栈，与虚拟机栈相似，主要是针对native方法服务。")])]),r._v(" "),t("li",[t("p",[r._v("堆（heap），所有线程共享，通过new操作产生对象，存放对象实例，分为年轻代（eden、两个survivor）和年老代，通过 -Xmx 和 -Xms 控制大小，如果内存不足会抛OutOfMemoryError。通过GC释放。")])]),r._v(" "),t("li",[t("p",[r._v("方法区：主要是类信息、常量、静态变量，也叫持久代，通过 -XXMaxPerSize 控制大小，当方法区无法满足内存分配需求时也会抛出 OutOfMemoryError。特别注意动态代理子类，在运行期会创建很多新的子类，导致空间不足。")])])]),r._v(" "),t("p",[t("img",{attrs:{src:"/images/JVM%E5%86%85%E5%AD%98%E7%BB%93%E6%9E%84/gc-memory.jpg",alt:"gc-memory"}})]),r._v(" "),t("ul",[t("li",[r._v("Young GC")])]),r._v(" "),t("p",[r._v("Eden Space满了；Survivor Space满了")]),r._v(" "),t("ul",[t("li",[r._v("Full GC")])]),r._v(" "),t("p",[r._v("老年代满了；持久代满了")]),r._v(" "),t("p",[t("code",[r._v("jstat –gcutil 进程ID 刷新时间（可以实时监控jvm 的gc情况)")])])])}),[],!1,null,null,null);e.default=v.exports}}]);